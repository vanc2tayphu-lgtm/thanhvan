<!DOCTYPE html>
<html lang="vi">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>B√†i Thi: L·ªõp 6 - B√†i 1: Ch√†o h·ªèi & L√†m quen</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://fonts.googleapis.com/css2?family=Quicksand:wght@400;500;600;700;800&display=swap" rel="stylesheet">
    
    <!-- React & ReactDOM -->
    <script crossorigin src="https://unpkg.com/react@18/umd/react.production.min.js"></script>
    <script crossorigin src="https://unpkg.com/react-dom@18/umd/react-dom.production.min.js"></script>
    
    <!-- Babel ƒë·ªÉ bi√™n d·ªãch JSX ngay trong tr√¨nh duy·ªát -->
    <script src="https://unpkg.com/babel-standalone@6/babel.min.js"></script>

    <style>
      body { font-family: 'Quicksand', sans-serif; }
      .animate-bounce-slow { animation: bounce 3s infinite; }
      @keyframes bounce { 0%, 100% { transform: translateY(-5%); } 50% { transform: translateY(0); } }
    </style>
</head>
<body class="bg-slate-50 bg-[radial-gradient(at_top_left,_var(--tw-gradient-stops))] from-indigo-100 via-purple-50 to-pink-100 min-h-screen text-slate-900">
    <div id="root"></div>

    <script type="text/babel">
        // --- NH√öNG D·ªÆ LI·ªÜU C√ÇU H·ªéI ---
        const quizData = {"questions":[{"type":"matching","questionText":"ËØ∑Â∞Ü‰∏ãÂàóÁü≠ËØ≠‰∏éÊúÄÂêàÈÄÇÁöÑÈáèËØçËøõË°åÂåπÈÖç„ÄÇ","explanation":"Trong ti·∫øng Trung, vi·ªác s·ª≠ d·ª•ng ƒë√∫ng l∆∞·ª£ng t·ª´ l√† r·∫•t quan tr·ªçng: 1. 'Êää' (b«é) d√πng cho c√°c v·∫≠t ƒë∆∞·ª£c k·∫øt th√†nh b√≥ (rau); 2. '‰∏™' (g√®) l√† l∆∞·ª£ng t·ª´ th√¥ng d·ª•ng nh·∫•t d√πng cho ng∆∞·ªùi; 3. 'Âº†' (zhƒÅng) d√πng cho c√°c v·∫≠t m·ªèng, ph·∫≥ng (·∫£nh, gi·∫•y); 4. 'Áì∂' (p√≠ng) d√πng cho c√°c lo·∫°i ƒë·ªì u·ªëng ƒë√≥ng chai; 5. '‰Ωç' (w√®i) d√πng cho ng∆∞·ªùi v·ªõi s·∫Øc th√°i l·ªãch s·ª±, trang tr·ªçng (qu√Ω kh√°ch).","correctAnswer":"1-B, 2-D, 3-A, 4-E, 5-C","audioScript":"","context":"","id":"HSK1-VOC-MATCH-01","options":["A: Âº† (ZhƒÅng)","B: Êää (b«é)","C: ‰Ωç (w√®i)","D: ‰∏™ (g√®)","E: Áì∂ (p√≠ng)"],"pairs":[{"left":"1. ‰∏Ä......ÈùíËèú","right":"B: Êää (b«é)"},{"left":"2. ÂÖ≠......Ë∂äÂçó‰∫∫","right":"D: ‰∏™ (g√®)"},{"left":"3. ‰∏â......ÁÖßÁâá","right":"A: Âº† (ZhƒÅng)"},{"left":"4. ÂÖ´......È•ÆÊñô","right":"E: Áì∂ (p√≠ng)"},{"left":"5. ‰∏É......Ë¥µÂÆæ","right":"C: ‰Ωç (w√®i)"}],"score":2},{"type":"matching","questionText":"ËØ∑Â∞Ü‰∏ãÂàóÂè•Â≠ê‰∏éÊã¨Âè∑‰∏≠Ê≠£Á°ÆÁöÑËØçËØ≠ËøõË°åÂåπÈÖç„ÄÇ","explanation":"Gi·∫£i th√≠ch chi ti·∫øt: 1. Â¶πÂ¶πÂéªÂì™Èáå? (Em g√°i ƒëi ƒë√¢u?) - S·ª≠ d·ª•ng ƒë·ªông t·ª´ 'Âéª' (ƒëi). 2. ÈÇ£‰∫õË°£Êúç (Nh·ªØng b·ªô qu·∫ßn √°o kia) - S·ª≠ d·ª•ng l∆∞·ª£ng t·ª´ '‰∫õ' ƒë·ªÉ ch·ªâ s·ªë nhi·ªÅu. 3. ‰Ω†Âè´‰ªÄ‰πàÂêçÂ≠ó? (B·∫°n t√™n l√† g√¨?) - S·ª≠ d·ª•ng ƒë·ªông t·ª´ 'Âè´' (g·ªçi l√†/t√™n l√†). 4. ËøôÊòØÊàëÁöÑ‰π¶ (ƒê√¢y l√† s√°ch c·ªßa t√¥i) - S·ª≠ d·ª•ng ƒë·ªông t·ª´ 'ÊòØ' (l√†) ƒë·ªÉ kh·∫≥ng ƒë·ªãnh. 5. Â≠¶Ê†°ÂæàËøë (Tr∆∞·ªùng h·ªçc r·∫•t g·∫ßn) - S·ª≠ d·ª•ng ph√≥ t·ª´ ch·ªâ m·ª©c ƒë·ªô 'Âæà' (r·∫•t) ƒë·ª©ng tr∆∞·ªõc t√≠nh t·ª´.","correctAnswer":"1-E, 2-D, 3-B, 4-A, 5-C","context":"","id":"HSK1-VOC-MATCH-02","options":["A: ÊòØ sh√¨","B: Âè´ ji√†o","C: Âæà hƒõn","D: ‰∫õ xiƒì","E: Âéª q√π"],"pairs":[{"left":"1. Â¶πÂ¶π ............. Âì™Èáå?","right":"E: Âéª q√π"},{"left":"2. ÈÇ£ ............. Ë°£Êúç„ÄÇ","right":"D: ‰∫õ xiƒì"},{"left":"3. ‰Ω† ........... ‰ªÄ‰πàÂêçÂ≠ó?","right":"B: Âè´ ji√†o"},{"left":"4. ÈÄô ............. ÊàëÁöÑ‰π¶„ÄÇ","right":"A: ÊòØ sh√¨"},{"left":"5. Â≠¶Ê†° ............ Ëøë„ÄÇ","right":"C: Âæà hƒõn"}],"score":2},{"type":"matching","questionText":"ËØ∑Â∞ÜÂ∑¶‰æßÁöÑ‰∏≠ÊñáËØçÊ±á‰∏éÂè≥‰æßÂØπÂ∫îÁöÑË∂äÂçóËØ≠ÁøªËØëËøõË°åËøûÁ∫ø„ÄÇ","explanation":"D∆∞·ªõi ƒë√¢y l√† √Ω nghƒ©a t∆∞∆°ng ·ª©ng c·ªßa c√°c t·ª´: 1. ÊòØ (sh√¨) c√≥ nghƒ©a l√† 'l√†' (E); 2. ÈÇ£ (n√†) c√≥ nghƒ©a l√† 'kia' (A); 3. È¶ôËïâ (xiƒÅngjiƒÅo) c√≥ nghƒ©a l√† 'chu·ªëi' (B); 4. ‰æøÂÆú (pi√°n yi) c√≥ nghƒ©a l√† 'r·∫ª' (C); 5. Èí± (qi√°n) c√≥ nghƒ©a l√† 'ti·ªÅn' (D).","correctAnswer":"1-E, 2-A, 3-B, 4-C, 5-D","context":"","id":"HSK1-VOC-MATCH-03","pairs":[{"left":"1. ÊòØ (sh√¨)","right":"E. l√†"},{"left":"2. ÈÇ£ (n√†)","right":"A. kia"},{"left":"3. È¶ôËïâ (xiƒÅngjiƒÅo)","right":"B. chu·ªëi"},{"left":"4. ‰æøÂÆú (pi√°n y√≠)","right":"C. r·∫ª"},{"left":"5. Èí± (qi√°n)","right":"D. ti·ªÅn"}],"score":2},{"type":"matching","questionText":"ËØ∑ÂåπÈÖç‰ª•‰∏ãË∂äÂçóËØ≠ËØçÊ±á‰∏éÂÖ∂ÂØπÂ∫îÁöÑ‰∏≠ÊñáËØçÊ±á„ÄÇ","explanation":"C√¢u h·ªèi y√™u c·∫ßu n·ªëi c√°c t·ª´ v·ª±ng ti·∫øng Vi·ªát v·ªõi t·ª´ ti·∫øng Trung t∆∞∆°ng ·ª©ng: 1. ng∆∞·ªùi n·ªëi v·ªõi ‰∫∫ (r√©n), 2. mu·ªën n·ªëi v·ªõi ÊÉ≥ (xi«éng), 3. ƒÉn c∆°m n·ªëi v·ªõi ÂêÉÈ•≠ (chƒ´ f√†n), 4. th·ª© n·ªëi v·ªõi ÊòüÊúü (xƒ´ng q√≠), 5. xem n·ªëi v·ªõi Áúã (k√†n).","correctAnswer":"1-B, 2-C, 3-E, 4-D, 5-A","audioScript":"","context":"","id":"HSK1-VOC-MATCH-04","pairs":[{"left":"1. ng∆∞·ªùi","right":"B: ‰∫∫ (r√©n)"},{"left":"2. mu·ªën","right":"C: ÊÉ≥ (xi«éng)"},{"left":"3. ƒÉn c∆°m","right":"E: ÂêÉÈ•≠ (chƒ´ f√†n)"},{"left":"4. th·ª©","right":"D: ÊòüÊúü (xƒ´ng q√≠)"},{"left":"5. xem","right":"A: Áúã (k√†n)"}],"score":2},{"id":"HSK1-VOC-MCQ-01","type":"multiple_choice","questionText":"III.\tÁªÑÂè•Â≠ê  S·∫Øp x·∫øp th√†nh c√¢u ho√†n ch·ªânh \nA ÂíñÂï°        BÂñù         C‰ªñ","explanation":"Ch√†o b·∫°n, d∆∞·ªõi ƒë√¢y l√† ph·∫ßn gi·∫£i th√≠ch chi ti·∫øt v√† mang t√≠nh s∆∞ ph·∫°m cho c√¢u h·ªèi s·∫Øp x·∫øp t·ª´ ti·∫øng Trung n√†y.\n\nPh·∫ßn gi·∫£i th√≠ch c≈© m√† b·∫°n cung c·∫•p ƒëang b·ªã **nh·∫ßm l·∫´n ho√†n to√†n** sang m·ªôt c·∫•u tr√∫c kh√°c (c·∫•u tr√∫c ph·ªß ƒë·ªãnh v·ªõi \"sh√¨\"). D∆∞·ªõi ƒë√¢y l√† n·ªôi dung hi·ªáu ƒë√≠nh ch√≠nh x√°c v√† chi ti·∫øt:\n\n---\n\n### **GI·∫¢I TH√çCH CHI TI·∫æT ƒê√ÅP √ÅN**\n\n**C√¢u h·ªèi:** S·∫Øp x·∫øp th√†nh c√¢u ho√†n ch·ªânh t·ª´ c√°c t·ª´:\n*   **A. ÂíñÂï° (kƒÅfƒìi):** C√† ph√™\n*   **B. Âñù (hƒì):** U·ªëng\n*   **C. ‰ªñ (tƒÅ):** Anh ·∫•y / √îng ·∫•y\n\n#### **B∆∞·ªõc 1: Ph√¢n t√≠ch t·ª´ lo·∫°i v√† √Ω nghƒ©a**\nTr∆∞·ªõc khi s·∫Øp x·∫øp, ch√∫ng ta c·∫ßn x√°c ƒë·ªãnh vai tr√≤ c·ªßa t·ª´ng t·ª´ trong c√¢u:\n1.  **‰ªñ (tƒÅ):** ƒê√¢y l√† ƒê·∫°i t·ª´ nh√¢n x∆∞ng, ƒë√≥ng vai tr√≤ l√†m **Ch·ªß ng·ªØ (S)** trong c√¢u (ng∆∞·ªùi th·ª±c hi·ªán h√†nh ƒë·ªông).\n2.  **Âñù (hƒì):** ƒê√¢y l√† ƒê·ªông t·ª´, ƒë√≥ng vai tr√≤ l√†m **V·ªã ng·ªØ (V)** (ch·ªâ h√†nh ƒë·ªông).\n3.  **ÂíñÂï° (kƒÅfƒìi):** ƒê√¢y l√† Danh t·ª´, ƒë√≥ng vai tr√≤ l√†m **T√¢n ng·ªØ (O)** (ƒë·ªëi t∆∞·ª£ng ch·ªãu t√°c ƒë·ªông c·ªßa h√†nh ƒë·ªông \"u·ªëng\").\n\n#### **B∆∞·ªõc 2: √Åp d·ª•ng c·∫•u tr√∫c ng·ªØ ph√°p**\nTrong ti·∫øng Trung c∆° b·∫£n, c·∫•u tr√∫c c√¢u tr·∫ßn thu·∫≠t kh·∫≥ng ƒë·ªãnh tu√¢n theo quy t·∫Øc gi·ªëng ti·∫øng Vi·ªát:\n> **Ch·ªß ng·ªØ (S) + ƒê·ªông t·ª´ (V) + T√¢n ng·ªØ (O)**\n\n*   **S (Ai?):** ‰ªñ (C)\n*   **V (L√†m g√¨?):** Âñù (B)\n*   **O (C√°i g√¨?):** ÂíñÂï° (A)\n\n#### **B∆∞·ªõc 3: S·∫Øp x·∫øp v√† ho√†n thi·ªán**\nGh√©p c√°c th√†nh ph·∫ßn l·∫°i theo th·ª© t·ª± **C - B - A**, ta ƒë∆∞·ª£c c√¢u:\n**‰ªñ Âñù ÂíñÂï°„ÄÇ**\n(Pinyin: TƒÅ hƒì kƒÅfƒìi.)\n\n*   **D·ªãch nghƒ©a:** Anh ·∫•y u·ªëng c√† ph√™.\n\n---\n\n### **T·ªîNG K·∫æT GHI NH·ªö (Pedagogical Note):**\n*   **Quy t·∫Øc:** ƒê·ªÉ l√†m d·∫°ng b√†i s·∫Øp x·∫øp c√¢u, b∆∞·ªõc ƒë·∫ßu ti√™n lu√¥n l√† t√¨m **ƒê·ªông t·ª´ (h√†nh ƒë·ªông)**. Sau ƒë√≥ ƒë·∫∑t c√¢u h·ªèi: *Ai l√† ng∆∞·ªùi th·ª±c hi·ªán h√†nh ƒë·ªông ƒë√≥?* (ƒë·ªÉ t√¨m Ch·ªß ng·ªØ) v√† *H√†nh ƒë·ªông ƒë√≥ t√°c ƒë·ªông v√†o c√°i g√¨?* (ƒë·ªÉ t√¨m T√¢n ng·ªØ).\n*   **L·ªói sai th∆∞·ªùng g·∫∑p:** ƒê·ª´ng nh·∫ßm l·∫´n gi·ªØa ti·∫øng Trung v√† c√°c ng√¥n ng·ªØ c√≥ c·∫•u tr√∫c kh√°c (nh∆∞ ti·∫øng Nh·∫≠t hay ti·∫øng H√†n). Ti·∫øng Trung c√≥ tr·∫≠t t·ª± t·ª´ S-V-O r·∫•t g·∫ßn g≈©i v·ªõi ti·∫øng Vi·ªát, n√™n b·∫°n c√≥ th·ªÉ t∆∞ duy theo logic ti·∫øng Vi·ªát trong tr∆∞·ªùng h·ª£p ƒë∆°n gi·∫£n n√†y.\n\n**L∆∞u √Ω v·ªÅ ph·∫ßn gi·∫£i th√≠ch c≈©:** Ph·∫ßn gi·∫£i th√≠ch tr∆∞·ªõc ƒë√≥ c·ªßa b·∫°n n√≥i v·ªÅ \"‰∏ç\" (b√π - kh√¥ng) v√† \"ÊòØ\" (sh√¨ - l√†) l√† ho√†n to√†n sai l·ªách v√¨ trong 3 t·ª´ ƒë·ªÅ b√†i cho (A, B, C) kh√¥ng h·ªÅ xu·∫•t hi·ªán hai t·ª´ n√†y. C√¢u ƒë√∫ng ph·∫£i t·∫≠p trung v√†o h√†nh ƒë·ªông \"U·ªëng c√† ph√™\".","skill":"T·ª´ v·ª±ng (Vocabulary)","correctAnswer":"C-B- A","options":["C-B- A","B-A-C","A-C-B"],"score":0.4},{"id":"HSK1-VOC-MCQ-02","type":"multiple_choice","questionText":"ÁªÑÂè•Â≠ê  S·∫Øp x·∫øp th√†nh c√¢u ho√†n ch·ªânh \nAÈªÑ         BÂ•Ω         CËÄÅÂ∏à","explanation":"Ch√†o b·∫°n, ƒë√¢y l√† ph·∫ßn gi·∫£i th√≠ch chi ti·∫øt v√† mang t√≠nh s∆∞ ph·∫°m cho c√¢u h·ªèi s·∫Øp x·∫øp t·ª´ ti·∫øng Trung n√†y.\n\nƒê·∫ßu ti√™n, ch√∫ng ta c·∫ßn l∆∞u √Ω r·∫±ng ph·∫ßn gi·∫£i th√≠ch c≈© (v·ªÅ ƒë·ªông t·ª´ 'Âè´' - ji√†o) l√† **ho√†n to√†n sai** v√¨ trong c√°c t·ª´ ƒë√£ cho kh√¥ng h·ªÅ c√≥ t·ª´ 'Âè´'. D∆∞·ªõi ƒë√¢y l√† c√°ch gi·∫£i th√≠ch ƒë√∫ng v√† d·ªÖ hi·ªÉu nh·∫•t:\n\n---\n\n### 1. Ph√¢n t√≠ch c√°c t·ª´ v·ª±ng (A, B, C):\n\n*   **A. ÈªÑ (Hu√°ng):** ƒê√¢y l√† m·ªôt **H·ªç** c·ªßa ng∆∞·ªùi Trung Qu·ªëc (H·ªç Ho√†ng).\n*   **B. Â•Ω (H«éo):** C√≥ nghƒ©a l√† \"t·ªët\", \"kh·ªèe\". Tuy nhi√™n, khi ƒë·ª©ng sau m·ªôt danh t·ª´ ch·ªâ ng∆∞·ªùi, n√≥ t·∫°o th√†nh m·ªôt **l·ªùi ch√†o**.\n*   **C. ËÄÅÂ∏à (L«éoshƒ´):** C√≥ nghƒ©a l√† **Th·∫ßy gi√°o** ho·∫∑c **C√¥ gi√°o**.\n\n---\n\n### 2. Quy t·∫Øc ng·ªØ ph√°p v√† VƒÉn h√≥a c·∫ßn nh·ªõ:\n\nƒê·ªÉ l√†m ƒë√∫ng c√¢u n√†y, h·ªçc sinh c·∫ßn n·∫Øm v·ªØng 2 quy t·∫Øc quan tr·ªçng sau:\n\n**Quy t·∫Øc 1: C√°ch g·ªçi t√™n k√®m ch·ª©c danh trong ti·∫øng Trung**\n*   Trong ti·∫øng Vi·ªát, ch√∫ng ta th∆∞·ªùng g·ªçi l√†: **Th·∫ßy/C√¥ + T√™n** (V√≠ d·ª•: C√¥ Lan, Th·∫ßy Nam).\n*   Trong ti·∫øng Trung, quy t·∫Øc l·ªãch s·ª± l√†: **H·ªç + Ch·ª©c danh** (V√≠ d·ª•: H·ªç + L√£o s∆∞).\n*   V√¨ v·∫≠y, \"Th·∫ßy/C√¥ h·ªç Ho√†ng\" ph·∫£i l√†: **ÈªÑ (H·ªç) + ËÄÅÂ∏à (Ch·ª©c danh)** $\\rightarrow$ **ÈªÑËÄÅÂ∏à**.\n\n**Quy t·∫Øc 2: C·∫•u tr√∫c c√¢u ch√†o h·ªèi c∆° b·∫£n**\n*   C√¥ng th·ª©c: **[Ng∆∞·ªùi ƒë∆∞·ª£c ch√†o] + Â•Ω (h«éo)**.\n*   V√≠ d·ª•:\n    *   ‰Ω†Â•Ω (N«ê h«éo): Ch√†o b·∫°n (B·∫°n + t·ªët).\n    *   ËÄÅÂ∏àÂ•Ω (L«éoshƒ´ h«éo): Ch√†o th·∫ßy c√¥ (Th·∫ßy c√¥ + t·ªët).\n\n---\n\n### 3. C√°c b∆∞·ªõc s·∫Øp x·∫øp c√¢u:\n\n*   **B∆∞·ªõc 1:** Gh√©p H·ªç v√† Ch·ª©c danh l·∫°i v·ªõi nhau ƒë·ªÉ x√°c ƒë·ªãnh ƒë·ªëi t∆∞·ª£ng ƒë∆∞·ª£c nh·∫Øc ƒë·∫øn. Ta c√≥: **A + C** (ÈªÑËÄÅÂ∏à - Th·∫ßy/C√¥ Ho√†ng).\n*   **B∆∞·ªõc 2:** Th√™m t·ª´ d√πng ƒë·ªÉ ch√†o h·ªèi (Â•Ω) v√†o ph√≠a sau ƒë·ªëi t∆∞·ª£ng ƒë√≥. Ta c√≥: **(A + C) + B** (ÈªÑËÄÅÂ∏àÂ•Ω).\n\n**K·∫øt qu·∫£ cu·ªëi c√πng:** **A - C - B** (ÈªÑËÄÅÂ∏àÂ•Ω - Hu√°ng l«éoshƒ´ h«éo).\n\n---\n\n### 4. D·ªãch nghƒ©a c√¢u ho√†n ch·ªânh:\n*   **Ti·∫øng Trung:** ÈªÑËÄÅÂ∏àÂ•ΩÔºÅ\n*   **Phi√™n √¢m:** Hu√°ng l«éoshƒ´ h«éo!\n*   **D·ªãch nghƒ©a:** Em ch√†o th·∫ßy/c√¥ Ho√†ng! (Ho·∫∑c: Ch√†o th·∫ßy/c√¥ Ho√†ng).\n\n---\n\n### 5. M·ªü r·ªông ki·∫øn th·ª©c (Pedagogical Note):\nGi√°o vi√™n c√≥ th·ªÉ nh·∫Øc h·ªçc sinh m·ªôt s·ªë v√≠ d·ª• t∆∞∆°ng t·ª± ƒë·ªÉ ghi nh·ªõ c·∫•u tr√∫c **[H·ªç] + ËÄÅÂ∏à + Â•Ω**:\n1.  **ÁéãËÄÅÂ∏àÂ•Ω (W√°ng l«éoshƒ´ h«éo):** Ch√†o th·∫ßy V∆∞∆°ng.\n2.  **ÊùéËÄÅÂ∏àÂ•Ω (L«ê l«éoshƒ´ h«éo):** Ch√†o c√¥ L√Ω.\n3.  **Âº†ËÄÅÂ∏àÂ•Ω (ZhƒÅng l«éoshƒ´ h«éo):** Ch√†o th·∫ßy Tr∆∞∆°ng.\n\n**L·ªùi khuy√™n:** Lu√¥n nh·ªõ ƒë·∫∑t \"H·ªç\" l√™n ƒë·∫ßu c√¢u khi ch√†o h·ªèi th·∫ßy c√¥ m·ªôt c√°ch trang tr·ªçng trong ti·∫øng Trung nh√©!","skill":"T·ª´ v·ª±ng (Vocabulary)","correctAnswer":"A-C-B","options":["A-B-C","A-C-B","C-A-B"],"score":0.4},{"id":"HSK1-VOC-MCQ-03","type":"multiple_choice","questionText":"ÁªÑÂè•Â≠ê  S·∫Øp x·∫øp th√†nh c√¢u ho√†n ch·ªânh \nBÂéª       C‰Ω†        AÂéª          D‰∏ç ","explanation":"Ch√†o b·∫°n, d∆∞·ªõi ƒë√¢y l√† ph·∫ßn gi·∫£i th√≠ch chi ti·∫øt v√† mang t√≠nh s∆∞ ph·∫°m cho c√¢u h·ªèi s·∫Øp x·∫øp t·ª´ ti·∫øng Trung n√†y.\n\n---\n\n### 1. Ph√¢n t√≠ch c√°c t·ª´ cho s·∫µn:\nTr∆∞·ªõc h·∫øt, ch√∫ng ta c·∫ßn x√°c ƒë·ªãnh √Ω nghƒ©a v√† t·ª´ lo·∫°i c·ªßa t·ª´ng t·ª´:\n*   **A. Âéª (q√π):** ƒêi (ƒê·ªông t·ª´)\n*   **B. Âéª (q√π):** ƒêi (ƒê·ªông t·ª´)\n*   **C. ‰Ω† (n«ê):** B·∫°n/Anh/Ch·ªã (ƒê·∫°i t·ª´ nh√¢n x∆∞ng - ƒë√≥ng vai tr√≤ Ch·ªß ng·ªØ)\n*   **D. ‰∏ç (b√π):** Kh√¥ng (Ph√≥ t·ª´ ph·ªß ƒë·ªãnh)\n\n### 2. X√°c ƒë·ªãnh c·∫•u tr√∫c ng·ªØ ph√°p:\nTrong c√¢u n√†y, ch√∫ng ta th·∫•y c√≥ s·ª± xu·∫•t hi·ªán c·ªßa hai ƒë·ªông t·ª´ gi·ªëng nhau (**Âéª**) v√† m·ªôt t·ª´ ph·ªß ƒë·ªãnh (**‰∏ç**) ·ªü gi·ªØa. ƒê√¢y l√† d·∫•u hi·ªáu ƒë·∫∑c tr∆∞ng c·ªßa **C√¢u h·ªèi ch√≠nh ph·∫£n (Ê≠£ÂèçÁñëÈóÆÂè•)** trong ti·∫øng Trung.\n\n**C·∫•u tr√∫c c√¢u h·ªèi ch√≠nh ph·∫£n:**\n> **Ch·ªß ng·ªØ + ƒê·ªông t·ª´ + ‰∏ç + ƒê·ªông t·ª´?**\n\n*√ù nghƒ©a:* H√¨nh th·ª©c n√†y d√πng ƒë·ªÉ h·ªèi √Ω ki·∫øn ho·∫∑c x√°c nh·∫≠n m·ªôt h√†nh ƒë·ªông c√≥ x·∫£y ra hay kh√¥ng. N√≥ t∆∞∆°ng ƒë∆∞∆°ng v·ªõi c·∫•u tr√∫c \"ƒê·ªông t·ª´ + Âêó?\" ho·∫∑c d·ªãch sang ti·∫øng Vi·ªát l√† \"C√≥... kh√¥ng?\".\n\n### 3. C√°c b∆∞·ªõc s·∫Øp x·∫øp:\n*   **B∆∞·ªõc 1: T√¨m ch·ªß ng·ªØ.** Trong c√°c t·ª´ tr√™n, **‰Ω† (C)** l√† ƒë·∫°i t·ª´ ch·ªâ ng∆∞·ªùi, ƒë√≥ng vai tr√≤ ch·ªß ng·ªØ.\n*   **B∆∞·ªõc 2: √Åp d·ª•ng c·∫•u tr√∫c ch√≠nh ph·∫£n (V-‰∏ç-V).** ƒê·ªông t·ª´ ·ªü ƒë√¢y l√† **Âéª**. V·∫≠y ta c√≥ c·ª•m **Âéª (A) + ‰∏ç (D) + Âéª (B)**.\n*   **B∆∞·ªõc 3: Gh√©p th√†nh c√¢u ho√†n ch·ªânh.**\n    *   Th·ª© t·ª±: **C - A - D - B**\n    *   C√¢u ho√†n ch·ªânh: **‰Ω† Âéª ‰∏ç ÂéªÔºü**\n    *   Phi√™n √¢m: *N«ê q√π b√π q√π?*\n    *   D·ªãch nghƒ©a: *B·∫°n c√≥ ƒëi kh√¥ng?*\n\n### 4. T·∫°i sao gi·∫£i th√≠ch c≈© l·∫°i sai?\nGi·∫£i th√≠ch hi·ªán t·∫°i c·ªßa b·∫°n: *\"'Êú¨' (bƒõn) l√† l∆∞·ª£ng t·ª´ d√πng cho s√°ch v·ªü. '‰∏™' d√πng cho ng∆∞·ªùi/v·∫≠t chung chung...\"* l√† **ho√†n to√†n sai l·∫°c**.\n*   **L√Ω do:** N·ªôi dung gi·∫£i th√≠ch n√†y ƒëang n√≥i v·ªÅ **L∆∞·ª£ng t·ª´**, trong khi c√°c t·ª´ cho s·∫µn (‰Ω†, Âéª, ‰∏ç) l√† **ƒê·∫°i t·ª´, ƒê·ªông t·ª´ v√† Ph√≥ t·ª´**. Kh√¥ng c√≥ t·ª´ n√†o trong c√¢u h·ªèi li√™n quan ƒë·∫øn \"s√°ch v·ªü\" hay \"l∆∞·ª£ng t·ª´\" c·∫£.\n\n### 5. Ki·∫øn th·ª©c m·ªü r·ªông (D√†nh cho h·ªçc vi√™n):\nƒê·ªÉ ghi nh·ªõ l√¢u h∆°n, b·∫°n c√≥ th·ªÉ h·ªçc th√™m c√°c v√≠ d·ª• t∆∞∆°ng t·ª±:\n1.  **‰Ω† ÂêÉ ‰∏ç ÂêÉÔºü** (N«ê chƒ´ b√π chƒ´?): B·∫°n c√≥ ƒÉn kh√¥ng?\n2.  **Â•Ω ‰∏ç Â•ΩÔºü** (H«éo b√π h«éo?): C√≥ t·ªët kh√¥ng? / ƒê∆∞·ª£c kh√¥ng?\n3.  **‰Ω† ÊòØ ‰∏ç ÊòØ ËÄÅÂ∏àÔºü** (N«ê sh√¨ b√∫ sh√¨ l«éoshƒ´?): B·∫°n c√≥ ph·∫£i l√† gi√°o vi√™n kh√¥ng?\n\n**L∆∞u √Ω:** Trong c√¢u h·ªèi ch√≠nh ph·∫£n \"V-‰∏ç-V\", ch√∫ng ta **kh√¥ng** th√™m tr·ª£ t·ª´ ng·ªØ kh√≠ **Âêó (ma)** ·ªü cu·ªëi c√¢u n·ªØa.\n*   ƒê√∫ng: ‰Ω†Âéª‰∏çÂéªÔºü (N«ê q√π b√π q√π?)\n*   Sai: ~~‰Ω†Âéª‰∏çÂéªÂêóÔºü~~ (D√πng th·ª´a c·∫•u tr√∫c h·ªèi)\n\n---\n**K·∫øt lu·∫≠n:** ƒê√°p √°n **C-A-D-B** l√† ch√≠nh x√°c d·ª±a tr√™n c·∫•u tr√∫c c√¢u h·ªèi ch√≠nh ph·∫£n trong ng·ªØ ph√°p ti·∫øng Trung c∆° b·∫£n.","skill":"T·ª´ v·ª±ng (Vocabulary)","correctAnswer":"C-A-D-B","options":["A-C-D- B","C-A-B- D","C-A-D-B","D-B-A- C"],"score":0.4},{"id":"HSK1-VOC-MCQ-04","type":"multiple_choice","questionText":"ÁªÑÂè•Â≠ê  S·∫Øp x·∫øp th√†nh c√¢u ho√†n ch·ªânh \nCÊ∞¥Êûú      A‰π∞         B‰Ω†","explanation":"Ch√†o b·∫°n, ƒë√¢y l√† ph·∫ßn gi·∫£i th√≠ch chi ti·∫øt v√† mang t√≠nh s∆∞ ph·∫°m cho c√¢u h·ªèi s·∫Øp x·∫øp c√¢u ti·∫øng Trung n√†y.\n\n### 1. Ph√¢n t√≠ch c√°c t·ª´ v·ª±ng (Vocabulary Breakdown)\n\nTr∆∞·ªõc h·∫øt, ch√∫ng ta c·∫ßn n·∫Øm r√µ nghƒ©a v√† lo·∫°i t·ª´ c·ªßa t·ª´ng th√†nh ph·∫ßn:\n\n*   **A. ‰π∞ (m«éi):** ƒê√¢y l√† m·ªôt **ƒê·ªông t·ª´**, c√≥ nghƒ©a l√† **\"Mua\"**.\n*   **B. ‰Ω† (n«ê):** ƒê√¢y l√† m·ªôt **ƒê·∫°i t·ª´ nh√¢n x∆∞ng**, c√≥ nghƒ©a l√† **\"B·∫°n/Anh/Ch·ªã\"**. Trong c√¢u, ƒë·∫°i t·ª´ th∆∞·ªùng ƒë√≥ng vai tr√≤ l√†m **Ch·ªß ng·ªØ**.\n*   **C. Ê∞¥Êûú (shu«êgu«í):** ƒê√¢y l√† m·ªôt **Danh t·ª´**, c√≥ nghƒ©a l√† **\"Hoa qu·∫£/Tr√°i c√¢y\"**. Danh t·ª´ n√†y ƒë√≥ng vai tr√≤ l√†m **T√¢n ng·ªØ** (ƒë·ªëi t∆∞·ª£ng ch·ªãu t√°c ƒë·ªông c·ªßa h√†nh ƒë·ªông mua).\n\n---\n\n### 2. C·∫•u tr√∫c ng·ªØ ph√°p c∆° b·∫£n (Grammar Structure)\n\nTrong ti·∫øng Trung, c·∫•u tr√∫c c√¢u kh·∫≥ng ƒë·ªãnh c∆° b·∫£n nh·∫•t ho√†n to√†n gi·ªëng v·ªõi ti·∫øng Vi·ªát, ƒë√≥ l√† c·∫•u tr√∫c **S - V - O**:\n\n> **Ch·ªß ng·ªØ (Subject) + ƒê·ªông t·ª´ (Verb) + T√¢n ng·ªØ (Object)**\n> *(Ai + L√†m g√¨ + C√°i g√¨)*\n\n√Åp d·ª•ng v√†o c√°c t·ª´ ƒë√£ cho:\n1.  **Ch·ªß ng·ªØ (S):** Ai th·ª±c hi·ªán h√†nh ƒë·ªông? ‚Üí **‰Ω† (B)** - B·∫°n.\n2.  **ƒê·ªông t·ª´ (V):** H√†nh ƒë·ªông l√† g√¨? ‚Üí **‰π∞ (A)** - Mua.\n3.  **T√¢n ng·ªØ (O):** Mua c√°i g√¨? ‚Üí **Ê∞¥Êûú (C)** - Hoa qu·∫£.\n\n---\n\n### 3. Gh√©p c√¢u ho√†n ch·ªânh\n\nKhi gh√©p theo th·ª© t·ª± **B - A - C**, ta ƒë∆∞·ª£c c√¢u:\n**‰Ω†‰π∞Ê∞¥Êûú„ÄÇ**\n*   **Phi√™n √¢m:** N«ê m«éi shu«êgu«í.\n*   **D·ªãch nghƒ©a:** B·∫°n mua hoa qu·∫£.\n\n---\n\n### 4. T·∫°i sao c√°c ph∆∞∆°ng √°n kh√°c l·∫°i sai?\n\n*   **A-B-C (‰π∞‰Ω†Ê∞¥Êûú):** Sai c·∫•u tr√∫c. Tr·ª´ khi b·∫°n l√† ng∆∞·ªùi b√°n h√†ng v√† mu·ªën n√≥i \"Mua hoa qu·∫£ c·ªßa b·∫°n\", nh∆∞ng trong tr∆∞·ªùng h·ª£p s·∫Øp x·∫øp c√¢u c∆° b·∫£n, c·∫•u tr√∫c S-V-O lu√¥n ƒë∆∞·ª£c ∆∞u ti√™n.\n*   **C-A-B (Ê∞¥Êûú‰π∞‰Ω†):** Sai logic. \"Hoa qu·∫£ mua b·∫°n\" l√† m·ªôt c√¢u kh√¥ng c√≥ nghƒ©a trong th·ª±c t·∫ø.\n*   **B-C-A (‰Ω†Ê∞¥Êûú‰π∞):** Sai ng·ªØ ph√°p. ƒê·ªông t·ª´ th∆∞·ªùng kh√¥ng ƒë·ª©ng cu·ªëi c√¢u trong c·∫•u tr√∫c ƒë∆°n gi·∫£n n√†y.\n\n---\n\n### 5. Ch·ªânh s·ª≠a ph·∫ßn gi·∫£i th√≠ch c≈© (Refining the Explanation)\n\nPh·∫ßn gi·∫£i th√≠ch c≈© c·ªßa b·∫°n b·ªã nh·∫ßm l·∫´n sang m·ªôt c√¢u kh√°c (c√≥ t·ª´ \"p√©ngy«íu\" - b·∫°n b√®). D∆∞·ªõi ƒë√¢y l√† ph·∫ßn gi·∫£i th√≠ch chu·∫©n x√°c ƒë·ªÉ b·∫°n c·∫≠p nh·∫≠t:\n\n> **Gi·∫£i th√≠ch:**\n> C√¢u n√†y √°p d·ª•ng c·∫•u tr√∫c c∆° b·∫£n **Ch·ªß ng·ªØ + ƒê·ªông t·ª´ + T√¢n ng·ªØ**.\n> - **Ch·ªß ng·ªØ:** **‰Ω†** (n«ê - b·∫°n) ƒë·ª©ng ƒë·∫ßu c√¢u ƒë·ªÉ ch·ªâ ng∆∞·ªùi th·ª±c hi·ªán h√†nh ƒë·ªông.\n> - **ƒê·ªông t·ª´:** **‰π∞** (m«éi - mua) ƒë·ª©ng sau ch·ªß ng·ªØ ƒë·ªÉ ch·ªâ h√†nh ƒë·ªông.\n> - **T√¢n ng·ªØ:** **Ê∞¥Êûú** (shu«êgu«í - hoa qu·∫£) ƒë·ª©ng cu·ªëi ƒë·ªÉ ch·ªâ ƒë·ªëi t∆∞·ª£ng ƒë∆∞·ª£c mua.\n> **=> Th·ª© t·ª± ƒë√∫ng l√† B-A-C.**","skill":"T·ª´ v·ª±ng (Vocabulary)","correctAnswer":"B-A-C","options":["B-A-C","C-B-A","A-B-C"],"score":0.4},{"id":"HSK1-VOC-MCQ-05","type":"multiple_choice","questionText":"ÁªÑÂè•Â≠ê  S·∫Øp x·∫øp th√†nh c√¢u ho√†n ch·ªânh \nDË¶Å        B‰ªÄ‰πà          CÂ•π         AÂêÉ ","explanation":"Ch√†o b·∫°n, ƒë√¢y l√† ph·∫ßn gi·∫£i th√≠ch chi ti·∫øt v√† mang t√≠nh s∆∞ ph·∫°m cho c√¢u h·ªèi s·∫Øp x·∫øp c√¢u n√†y.\n\nL∆∞u √Ω r·∫±ng ph·∫ßn gi·∫£i th√≠ch c≈© b·∫°n cung c·∫•p b·ªã nh·∫ßm l·∫´n sang n·ªôi dung kh√°c (n√≥i v·ªÅ \"n√≥i ti·∫øng H√°n\"), d∆∞·ªõi ƒë√¢y l√† ph·∫ßn hi·ªáu ƒë√≠nh ch√≠nh x√°c cho c√°c t·ª´ v·ª±ng **C√¥ ·∫•y - Mu·ªën - ƒÇn - G√¨**.\n\n---\n\n### Gi·∫£i th√≠ch chi ti·∫øt c√¢u h·ªèi S·∫Øp x·∫øp t·ª´ (ÁªÑÂè•Â≠ê)\n\n**C√°c t·ª´ ƒë√£ cho:**\n*   **A. ÂêÉ (chƒ´):** ƒÇn (ƒê·ªông t·ª´ ch√≠nh).\n*   **B. ‰ªÄ‰πà (sh√©nme):** C√°i g√¨ (ƒê·∫°i t·ª´ nghi v·∫•n d√πng ƒë·ªÉ h·ªèi).\n*   **C. Â•π (tƒÅ):** C√¥ ·∫•y (ƒê·∫°i t·ª´ nh√¢n x∆∞ng - ƒë√≥ng vai tr√≤ Ch·ªß ng·ªØ).\n*   **D. Ë¶Å (y√†o):** Mu·ªën / C·∫ßn (ƒê·ªông t·ª´ nƒÉng nguy·ªán - bi·ªÉu th·ªã √Ω mu·ªën).\n\n---\n\n### B∆∞·ªõc 1: Ph√¢n t√≠ch c·∫•u tr√∫c ng·ªØ ph√°p ti·∫øng Trung\nƒê·ªÉ s·∫Øp x·∫øp ƒë√∫ng, ch√∫ng ta c·∫ßn √°p d·ª•ng c·∫•u tr√∫c c√¢u c∆° b·∫£n trong ti·∫øng Trung:\n\n> **Ch·ªß ng·ªØ + ƒê·ªông t·ª´ nƒÉng nguy·ªán (mu·ªën/c·∫ßn) + ƒê·ªông t·ª´ ch√≠nh + T√¢n ng·ªØ**\n\nTrong ti·∫øng Trung, c√¢u h·ªèi v·ªõi t·ª´ \"c√°i g√¨\" (**‰ªÄ‰πà - sh√©nme**) c√≥ tr·∫≠t t·ª± t·ª´ gi·ªëng h·ªát nh∆∞ m·ªôt c√¢u tr·∫ßn thu·∫≠t, b·∫°n ch·ªâ c·∫ßn thay th√†nh ph·∫ßn mu·ªën h·ªèi b·∫±ng t·ª´ ƒë·ªÉ h·ªèi m√† kh√¥ng c·∫ßn ƒë·∫£o c·∫•u tr√∫c c√¢u nh∆∞ ti·∫øng Anh.\n\n### B∆∞·ªõc 2: S·∫Øp x·∫øp theo tr√¨nh t·ª± logic\n1.  **Ch·ªß ng·ªØ (Ai?):** Ch√∫ng ta ch·ªçn **C (Â•π - C√¥ ·∫•y)** ƒë·ªÉ ƒë·ª©ng ƒë·∫ßu c√¢u.\n2.  **ƒê·ªông t·ª´ nƒÉng nguy·ªán (Mu·ªën l√†m g√¨?):** Ch√∫ng ta ch·ªçn **D (Ë¶Å - Mu·ªën)** ƒë·ª©ng sau ch·ªß ng·ªØ ƒë·ªÉ b·ªï tr·ª£ √Ω nghƒ©a.\n3.  **H√†nh ƒë·ªông ch√≠nh (L√†m g√¨?):** Ti·∫øp theo l√† ƒë·ªông t·ª´ **A (ÂêÉ - ƒÇn)**.\n4.  **T√¢n ng·ªØ/T·ª´ ƒë·ªÉ h·ªèi (ƒÇn c√°i g√¨?):** Cu·ªëi c√πng l√† ƒë·∫°i t·ª´ nghi v·∫•n **B (‰ªÄ‰πà - C√°i g√¨)** ƒë√≥ng vai tr√≤ t√¢n ng·ªØ ƒë·ª©ng sau ƒë·ªông t·ª´.\n\n### B∆∞·ªõc 3: Ho√†n thi·ªán c√¢u\nK·∫øt n·ªëi c√°c th√†nh ph·∫ßn l·∫°i, ta c√≥:\n**C - D - A - B**\n> **Â•π Ë¶Å ÂêÉ ‰ªÄ‰πàÔºü**\n> *(TƒÅ y√†o chƒ´ sh√©nme?)*\n> **D·ªãch nghƒ©a:** C√¥ ·∫•y mu·ªën ƒÉn g√¨?\n\n---\n\n### T·∫°i sao c√°c ph∆∞∆°ng √°n kh√°c kh√¥ng ƒë√∫ng?\n*   N·∫øu x·∫øp **B (‰ªÄ‰πà)** l√™n ƒë·∫ßu c√¢u: Sai, v√¨ trong ti·∫øng Trung \"c√°i g√¨\" th∆∞·ªùng ƒë·ª©ng ·ªü v·ªã tr√≠ t√¢n ng·ªØ (sau ƒë·ªông t·ª´) n·∫øu n√≥ h·ªèi v·ªÅ v·∫≠t b·ªã t√°c ƒë·ªông.\n*   N·∫øu x·∫øp **A (ÂêÉ)** tr∆∞·ªõc **D (Ë¶Å)**: Sai, v√¨ ƒë·ªông t·ª´ nƒÉng nguy·ªán (mu·ªën/c√≥ th·ªÉ/n√™n) lu√¥n ph·∫£i ƒë·ª©ng tr∆∞·ªõc ƒë·ªông t·ª´ ch·ªâ h√†nh ƒë·ªông c·ª• th·ªÉ.\n\n### M·∫πo ghi nh·ªõ cho tr√¨nh ƒë·ªô HSK 1:\nKhi g·∫∑p d·∫°ng b√†i n√†y, h√£y lu√¥n t√¨m **Ch·ªß ng·ªØ** (ng∆∞·ªùi/v·∫≠t) ƒë·∫∑t l√™n ƒë·∫ßu, sau ƒë√≥ t√¨m **H√†nh ƒë·ªông**, v√† cu·ªëi c√πng l√† **V·∫≠t b·ªã t√°c ƒë·ªông** (ho·∫∑c t·ª´ ƒë·ªÉ h·ªèi v·∫≠t ƒë√≥).\n\n*   **C√¥ng th·ª©c b·ªè t√∫i:** `S (C√¥ ·∫•y) + Ë¶Å (Mu·ªën) + V (ƒÇn) + ‰ªÄ‰πà (C√°i g√¨)?`","skill":"T·ª´ v·ª±ng (Vocabulary)","correctAnswer":"C-D-A-B","options":["C-D-A-B","C-D-B-A","A-B-D-C","A-C-D-B"],"score":0.4}],"config":{"teacherName":"C√î H∆Ø∆†NG","language":"Ti·∫øng Trung","programMode":"level","grade":"L·ªõp 6","unit":"B√†i 1: Ch√†o h·ªèi & L√†m quen","proficiencyLevel":"HSK 1","difficulty":"Trung b√¨nh","skills":[],"skillConfig":{"T·ª´ v·ª±ng (Vocabulary)":{"matching":{"selected":true,"count":4,"topic":"","score":2,"level":"Nh·∫≠n bi·∫øt"},"multiple_choice":{"selected":true,"count":5,"topic":"","score":0.4,"level":"Nh·∫≠n bi·∫øt"}}},"googleScriptUrl":"https://script.google.com/macros/s/AKfycbxfvUsWN6p2zbajzF6ZfWzIjVmZZ2jQNp2jwmw49EA2fgdq3fPpmvMO2PVrWPxm3EMmIQ/exec","timeLimit":0,"githubUsername":"vanc2tayphu-lgtm","githubRepo":"cong-nghe","topic":"","questionCount":0,"skillQuestionMapping":{},"questionTypes":[]},"scoreConfig":{"mc":1,"tf":1,"match":2,"ci":1,"writing":2},"examCode":"ZUW344"};
        const { questions, config, scoreConfig, examCode } = quizData;

        // --- COMPONENTS ---

        const Button = ({ children, onClick, disabled, className, variant = 'primary' }) => {
            const base = "font-bold rounded-xl transition-all duration-200 shadow-lg px-6 py-3 ";
            const vars = {
                primary: "bg-blue-600 text-white hover:bg-blue-500 disabled:bg-slate-300",
                secondary: "bg-teal-500 text-white hover:bg-teal-400 disabled:bg-slate-300",
                outline: "border-2 border-slate-300 bg-white text-slate-500 hover:border-blue-400"
            };
            return <button onClick={onClick} disabled={disabled} className={base + vars[variant] + " " + className}>{children}</button>;
        };

        const AudioPlayer = ({ text }) => {
            const play = () => {
                if(!window.speechSynthesis) return;
                window.speechSynthesis.cancel();
                const u = new SpeechSynthesisUtterance(text);
                u.lang = 'en-US'; 
                window.speechSynthesis.speak(u);
            };
            return (
                <button onClick={play} className="mb-4 bg-blue-100 text-blue-700 px-4 py-2 rounded-full font-bold text-sm flex items-center gap-2 hover:bg-blue-200 transition">
                    üîä Nghe ƒëo·∫°n vƒÉn
                </button>
            );
        };

        // --- MAIN APP COMPONENT ---
        const QuizApp = () => {
            const [view, setView] = React.useState('info'); // info, game, result
            const [student, setStudent] = React.useState({ name: '', class: '' });
            const [currentIdx, setCurrentIdx] = React.useState(0);
            const [score, setScore] = React.useState(0);
            const [selected, setSelected] = React.useState(null); // String for MC, Object/Array for Matching
            const [isAnswered, setIsAnswered] = React.useState(false);
            const [feedback, setFeedback] = React.useState(null);
            
            // Matching State
            const [matches, setMatches] = React.useState({}); 

            // Timer
            const [timeLeft, setTimeLeft] = React.useState((config.timeLimit || 0) * 60);
            
            React.useEffect(() => {
                if (view === 'game' && config.timeLimit > 0) {
                    const t = setInterval(() => {
                        setTimeLeft(p => {
                            if (p <= 1) { clearInterval(t); finishGame(); return 0; }
                            return p - 1;
                        });
                    }, 1000);
                    return () => clearInterval(t);
                }
            }, [view]);

            const formatTime = (s) => Math.floor(s/60) + ':' + (s%60 < 10 ? '0' : '') + (s%60);

            const startExam = (e) => {
                e.preventDefault();
                if(student.name && student.class) setView('game');
            };

            const finishGame = () => {
                setView('result');
                // G·ª≠i ƒëi·ªÉm v·ªÅ Google Sheet n·∫øu c√≥
                if (config.googleScriptUrl) {
                    const formData = new URLSearchParams();
                    formData.append('name', student.name);
                    formData.append('class', student.class);
                    formData.append('score', score + '/' + questions.reduce((a,b)=>a+b.score,0));
                    formData.append('examCode', examCode);
                    formData.append('assessment', 'N·ªôp t·ª´ file HTML Offline');
                    // G·ª≠i request d·∫°ng no-cors ƒë·ªÉ tr√°nh l·ªói ch·∫∑n t·ª´ tr√¨nh duy·ªát
                    fetch(config.googleScriptUrl, {
                        method: 'POST', mode: 'no-cors', body: formData,
                        headers: { 'Content-Type': 'application/x-www-form-urlencoded' }
                    }).catch(e => console.log('Log send error', e));
                }
            };

            const handleAnswer = () => {
                const q = questions[currentIdx];
                let correct = false;
                
                if (q.type === 'matching') {
                     // Simple check: count correct pairs
                     let correctCount = 0;
                     q.pairs.forEach((p, i) => {
                         if (matches[i] === i) correctCount++; // Assuming logic maps index to index
                     });
                     correct = correctCount === q.pairs.length;
                } else if (q.type === 'writing') {
                    const norm = s => s.toLowerCase().trim().replace(/[^a-z0-9]/g,'');
                    correct = norm(selected || '') === norm(q.correctAnswer || '');
                } else {
                    correct = selected === q.correctAnswer;
                }

                if (correct) {
                    setScore(s => s + q.score);
                    setFeedback({correct: true, text: "Ch√≠nh x√°c!"});
                } else {
                    setFeedback({correct: false, text: "Sai r·ªìi. ƒê√°p √°n ƒë√∫ng: " + (q.correctAnswer || 'Xem gi·∫£i th√≠ch')});
                }
                setIsAnswered(true);
            };

            const nextQ = () => {
                if (currentIdx < questions.length - 1) {
                    setCurrentIdx(c => c + 1);
                    setSelected(null);
                    setMatches({});
                    setIsAnswered(false);
                    setFeedback(null);
                } else {
                    finishGame();
                }
            };

            // --- RENDER VIEWS ---

            if (view === 'info') return (
                <div className="min-h-screen flex items-center justify-center p-4">
                    <div className="bg-white rounded-3xl p-8 md:p-10 shadow-2xl max-w-md w-full border-4 border-indigo-200">
                        <div className="text-center mb-8">
                            <h1 className="text-2xl font-black text-indigo-900 mb-2 uppercase">B√ÄI THI TR·ª∞C TUY·∫æN</h1>
                            <div className="text-slate-500 font-bold">{config.grade} - {config.unit}</div>
                            {config.timeLimit > 0 && <div className="mt-2 text-red-500 font-bold text-sm">‚è± Th·ªùi gian: {config.timeLimit} ph√∫t</div>}
                        </div>
                        <form onSubmit={startExam} className="space-y-4">
                            <input required className="w-full p-4 border-2 rounded-xl font-bold outline-none focus:border-indigo-500" placeholder="H·ªç v√† t√™n..." value={student.name} onChange={e => setStudent({...student, name: e.target.value})} />
                            <input required className="w-full p-4 border-2 rounded-xl font-bold outline-none focus:border-indigo-500" placeholder="L·ªõp..." value={student.class} onChange={e => setStudent({...student, class: e.target.value})} />
                            <Button className="w-full" type="submit">B·∫ÆT ƒê·∫¶U L√ÄM B√ÄI</Button>
                        </form>
                    </div>
                </div>
            );

            if (view === 'result') {
                const max = questions.reduce((a,b)=>a+b.score,0);
                return (
                    <div className="min-h-screen flex items-center justify-center p-4">
                        <div className="bg-white rounded-[3rem] p-12 shadow-2xl text-center border-4 border-yellow-400 animate-bounce-slow max-w-lg w-full">
                            <h2 className="text-3xl font-black text-slate-800 mb-6">K·∫æT QU·∫¢</h2>
                            <div className="bg-yellow-50 p-8 rounded-3xl border-2 border-yellow-200 mb-6">
                                <div className="text-6xl font-black text-yellow-600 mb-2">{score}/{max}</div>
                                <p className="font-bold text-yellow-800 uppercase">ƒêi·ªÉm s·ªë</p>
                            </div>
                            <p className="font-bold text-slate-500 mb-6">B·∫°n ƒë√£ ho√†n th√†nh b√†i thi!</p>
                            <Button onClick={()=>window.location.reload()} variant="outline">L√†m l·∫°i</Button>
                        </div>
                    </div>
                );
            }

            // GAME VIEW
            const q = questions[currentIdx];

            return (
                <div className="max-w-4xl mx-auto p-4 md:p-6 min-h-screen flex flex-col justify-center">
                    <div className="bg-white/95 backdrop-blur rounded-3xl shadow-xl p-6 md:p-10 border-4 border-indigo-200 relative">
                        {config.timeLimit > 0 && <div className="absolute top-4 right-6 font-mono font-bold text-red-500 text-xl">{formatTime(timeLeft)}</div>}
                        
                        <div className="mb-6 border-b pb-4 flex justify-between items-end">
                            <div>
                                <div className="font-bold text-indigo-900 text-lg">{student.name}</div>
                                <div className="text-sm text-slate-500">{student.class}</div>
                            </div>
                            <div className="font-black text-indigo-600 text-xl">{currentIdx+1}/{questions.length}</div>
                        </div>

                        {q.audioScript && <AudioPlayer text={q.audioScript} />}
                        {q.context && <div className="mb-6 p-4 bg-yellow-50 border-l-4 border-yellow-400 text-slate-700 whitespace-pre-wrap text-lg">{q.context}</div>}
                        
                        {q.imageUrl && (
                            <div className="flex justify-center mb-6">
                                <img src={q.imageUrl} className="max-h-60 rounded-lg shadow-md object-contain border" />
                            </div>
                        )}
                        
                        {q.type !== 'matching' && (
                            <h3 className="text-xl md:text-2xl font-bold text-slate-800 mb-8 whitespace-pre-line text-center">{q.questionText}</h3>
                        )}

                        {!isAnswered ? (
                            <div className="space-y-4">
                                {q.type === 'writing' ? (
                                    <input className="w-full p-4 border-2 rounded-xl text-lg outline-none focus:border-indigo-500" placeholder="Nh·∫≠p c√¢u tr·∫£ l·ªùi..." value={selected||''} onChange={e=>setSelected(e.target.value)} />
                                ) : q.type === 'matching' ? (
                                    <div className="text-center p-10 bg-slate-100 rounded-xl">
                                        <h3 className="font-bold text-lg mb-4">{q.questionText}</h3>
                                        <p className="italic text-slate-500">D·∫°ng c√¢u h·ªèi gh√©p n·ªëi n√†y ƒë∆∞·ª£c h·ªó tr·ª£ t·ªët nh·∫•t tr√™n phi√™n b·∫£n App ƒë·∫ßy ƒë·ªß. Tr√™n b·∫£n HTML r√∫t g·ªçn n√†y, c√¢u h·ªèi n√†y s·∫Ω ƒë∆∞·ª£c t√≠nh ƒëi·ªÉm t·ª± ƒë·ªông khi b·∫°n nh·∫•n "Ch·ªët ƒë√°p √°n".</p>
                                        <div className="mt-4"><button onClick={()=>setSelected('done')} className="bg-indigo-100 text-indigo-700 px-4 py-2 rounded font-bold">ƒê√£ ho√†n th√†nh gh√©p n·ªëi (gi·∫£ l·∫≠p)</button></div>
                                    </div>
                                ) : (
                                    <div className="grid grid-cols-1 md:grid-cols-2 gap-3">
                                        {(q.options || ['True', 'False']).map((opt, i) => (
                                            <button key={i} onClick={()=>setSelected(opt)} className={"p-4 rounded-xl border-2 text-left font-medium transition-all flex gap-3 " + (selected===opt ? "border-indigo-500 bg-indigo-50 ring-2 ring-indigo-200" : "border-slate-200 hover:border-indigo-300")}>
                                                <span className={"w-6 h-6 rounded-full border flex items-center justify-center text-xs " + (selected===opt ? "bg-indigo-500 text-white" : "bg-slate-100")}>{String.fromCharCode(65+i)}</span>
                                                <span>{opt}</span>
                                            </button>
                                        ))}
                                    </div>
                                )}
                                <div className="mt-8 flex justify-center">
                                    <Button onClick={handleAnswer} disabled={!selected} className="w-full md:w-1/2">Ch·ªët ƒê√°p √Ån</Button>
                                </div>
                            </div>
                        ) : (
                            <div className="mt-6 p-6 bg-slate-50 rounded-2xl border border-slate-200 animate-fade-in">
                                <div className={"text-xl font-bold mb-2 flex items-center gap-2 " + (feedback.correct ? "text-green-600" : "text-red-500")}>
                                    <span className="text-2xl">{feedback.correct ? 'üéâ' : 'ü§î'}</span> {feedback.text}
                                </div>
                                <div className="text-slate-700 mb-6"><span className="font-bold text-indigo-600">Gi·∫£i th√≠ch:</span> {q.explanation}</div>
                                <div className="flex justify-end">
                                    <Button onClick={nextQ} variant="secondary">Ti·∫øp theo ‚ûú</Button>
                                </div>
                            </div>
                        )}
                    </div>
                </div>
            );
        };

        const root = ReactDOM.createRoot(document.getElementById('root'));
        root.render(<QuizApp />);
    </script>
</body>
</html>